{"ast":null,"code":"var _jsxFileName = \"D:\\\\Vscode\\\\Project\\\\VisualAnalytics\\\\EduAssistSys\\\\frontend\\\\src\\\\pages\\\\KnowledgeAnalysis.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Row, Col, Card, Select, Button, Table, Spin, Alert, Typography, Divider } from 'antd';\nimport ReactECharts from 'echarts-for-react';\nimport axios from 'axios';\nimport { KnowledgeForceGraph } from '../components/D3Visualizations';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nconst {\n  Title,\n  Paragraph\n} = Typography;\nconst KnowledgeAnalysis = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [students, setStudents] = useState([]);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [knowledgeData, setKnowledgeData] = useState(null);\n  const [weakPoints, setWeakPoints] = useState([]);\n  const [forceGraphData, setForceGraphData] = useState(null);\n\n  // 加载学生数据\n  useEffect(() => {\n    const fetchStudents = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get('/api/students');\n        setStudents(response.data);\n        setLoading(false);\n      } catch (err) {\n        console.error('加载学生数据失败:', err);\n        setError('加载学生数据失败，请稍后重试');\n        setLoading(false);\n      }\n    };\n    fetchStudents();\n  }, []);\n\n  // 分析知识点掌握度\n  const analyzeKnowledge = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const url = selectedStudent ? `/api/analysis/knowledge?student_id=${selectedStudent}` : '/api/analysis/knowledge';\n      const response = await axios.get(url);\n      if (response.data.status === 'success') {\n        setKnowledgeData(response.data.knowledge_mastery);\n        setWeakPoints(response.data.weak_points || []);\n\n        // 获取知识点关联数据用于力导向图可视化\n        if (response.data.knowledge_relations) {\n          setForceGraphData(response.data.knowledge_relations);\n        } else {\n          // 如果API没有返回关联数据，尝试单独获取\n          try {\n            const relationsUrl = selectedStudent ? `/api/analysis/knowledge_relations?student_id=${selectedStudent}` : '/api/analysis/knowledge_relations';\n            const relationsResponse = await axios.get(relationsUrl);\n            if (relationsResponse.data.status === 'success' && relationsResponse.data.relations) {\n              setForceGraphData(relationsResponse.data.relations);\n            } else {\n              // 如果API不存在，生成模拟数据用于展示\n              generateMockForceGraphData();\n            }\n          } catch (relationsErr) {\n            console.error('获取知识点关联数据失败:', relationsErr);\n            // 生成模拟数据用于展示\n            generateMockForceGraphData();\n          }\n        }\n      } else {\n        setError(response.data.message || '分析失败');\n      }\n      setLoading(false);\n    } catch (err) {\n      console.error('知识点分析失败:', err);\n      setError('知识点分析失败，请稍后重试');\n      setLoading(false);\n    }\n  };\n\n  // 生成模拟力导向图数据\n  const generateMockForceGraphData = () => {\n    if (!knowledgeData) {\n      console.log('无法生成力导向图：知识点数据为空');\n      return;\n    }\n    const knowledgeNames = Object.keys(knowledgeData);\n    console.log('知识点列表:', knowledgeNames);\n    if (knowledgeNames.length === 0) {\n      console.log('无法生成力导向图：知识点列表为空');\n      return;\n    }\n\n    // 创建节点\n    const nodes = knowledgeNames.map(name => ({\n      id: name,\n      name: name,\n      mastery: knowledgeData[name].correct_rate || 0,\n      value: (knowledgeData[name].total_submissions || 1) / 10 // 节点大小基于提交次数\n    }));\n\n    // 创建连接\n    const links = [];\n\n    // 确保至少有两个知识点才能创建连接\n    if (knowledgeNames.length > 1) {\n      // 为每个知识点创建1-2个随机连接\n      knowledgeNames.forEach((source, i) => {\n        const numLinks = Math.floor(Math.random() * 2) + 1; // 1-2个连接\n\n        for (let j = 0; j < numLinks; j++) {\n          // 随机选择目标知识点（不包括自己）\n          let targetIndex;\n          do {\n            targetIndex = Math.floor(Math.random() * knowledgeNames.length);\n          } while (targetIndex === i);\n          const target = knowledgeNames[targetIndex];\n\n          // 添加连接（避免重复）\n          if (!links.some(link => link.source === source && link.target === target || link.source === target && link.target === source)) {\n            links.push({\n              source: source,\n              target: target,\n              value: Math.random() * 2 + 1 // 随机连接强度\n            });\n          }\n        }\n      });\n    } else {\n      console.log('无法创建连接：知识点数量不足');\n    }\n    const graphData = {\n      nodes,\n      links\n    };\n    console.log('生成的力导向图数据:', graphData);\n    setForceGraphData(graphData);\n  };\n\n  // 生成知识点掌握度雷达图配置\n  const getKnowledgeRadarOption = () => {\n    if (!knowledgeData) return {};\n    const knowledgeNames = Object.keys(knowledgeData);\n    const correctRates = knowledgeNames.map(name => (knowledgeData[name].correct_rate * 100).toFixed(2));\n    return {\n      title: {\n        text: '知识点掌握度雷达图',\n        left: 'center'\n      },\n      tooltip: {\n        trigger: 'item'\n      },\n      radar: {\n        indicator: knowledgeNames.map(name => ({\n          name,\n          max: 100\n        }))\n      },\n      series: [{\n        name: '知识点掌握度',\n        type: 'radar',\n        data: [{\n          value: correctRates,\n          name: '正确率(%)',\n          areaStyle: {\n            color: 'rgba(24, 144, 255, 0.3)'\n          },\n          lineStyle: {\n            color: '#1890ff'\n          },\n          itemStyle: {\n            color: '#1890ff'\n          }\n        }]\n      }]\n    };\n  };\n\n  // 生成知识点掌握度柱状图配置\n  const getKnowledgeBarOption = () => {\n    if (!knowledgeData) return {};\n    const knowledgeNames = Object.keys(knowledgeData);\n    const correctRates = knowledgeNames.map(name => (knowledgeData[name].correct_rate * 100).toFixed(2));\n    const submissionRates = knowledgeNames.map(name => (knowledgeData[name].correct_submission_rate * 100).toFixed(2));\n    return {\n      title: {\n        text: '知识点掌握度对比',\n        left: 'center'\n      },\n      tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n          type: 'shadow'\n        }\n      },\n      legend: {\n        data: ['正确率(%)', '正确提交率(%)'],\n        top: 'bottom'\n      },\n      xAxis: {\n        type: 'category',\n        data: knowledgeNames,\n        axisLabel: {\n          rotate: 45,\n          interval: 0\n        }\n      },\n      yAxis: {\n        type: 'value',\n        name: '百分比(%)',\n        max: 100\n      },\n      series: [{\n        name: '正确率(%)',\n        type: 'bar',\n        data: correctRates,\n        itemStyle: {\n          color: '#1890ff'\n        }\n      }, {\n        name: '正确提交率(%)',\n        type: 'bar',\n        data: submissionRates,\n        itemStyle: {\n          color: '#52c41a'\n        }\n      }]\n    };\n  };\n\n  // 从属知识点表格列定义\n  const subKnowledgeColumns = [{\n    title: '知识点',\n    dataIndex: 'knowledge',\n    key: 'knowledge'\n  }, {\n    title: '从属知识点',\n    dataIndex: 'sub_knowledge',\n    key: 'sub_knowledge'\n  }, {\n    title: '正确率',\n    dataIndex: 'correct_rate',\n    key: 'correct_rate',\n    render: text => `${(text * 100).toFixed(2)}%`,\n    sorter: (a, b) => a.correct_rate - b.correct_rate\n  }, {\n    title: '正确提交率',\n    dataIndex: 'correct_submission_rate',\n    key: 'correct_submission_rate',\n    render: text => `${(text * 100).toFixed(2)}%`,\n    sorter: (a, b) => a.correct_submission_rate - b.correct_submission_rate\n  }, {\n    title: '平均用时(秒)',\n    dataIndex: 'avg_time_consume',\n    key: 'avg_time_consume',\n    render: text => text.toFixed(2),\n    sorter: (a, b) => a.avg_time_consume - b.avg_time_consume\n  }, {\n    title: '总提交次数',\n    dataIndex: 'total_submissions',\n    key: 'total_submissions',\n    sorter: (a, b) => a.total_submissions - b.total_submissions\n  }, {\n    title: '正确提交次数',\n    dataIndex: 'correct_submissions',\n    key: 'correct_submissions',\n    sorter: (a, b) => a.correct_submissions - b.correct_submissions\n  }];\n\n  // 薄弱环节表格列定义\n  const weakPointsColumns = [{\n    title: '知识点',\n    dataIndex: 'knowledge',\n    key: 'knowledge'\n  }, {\n    title: '从属知识点',\n    dataIndex: 'sub_knowledge',\n    key: 'sub_knowledge',\n    render: text => text || '-'\n  }, {\n    title: '正确率',\n    dataIndex: 'correct_rate',\n    key: 'correct_rate',\n    render: text => `${(text * 100).toFixed(2)}%`,\n    sorter: (a, b) => a.correct_rate - b.correct_rate\n  }, {\n    title: '原因',\n    dataIndex: 'reason',\n    key: 'reason'\n  }];\n\n  // 准备从属知识点表格数据\n  const getSubKnowledgeData = () => {\n    if (!knowledgeData) return [];\n    const tableData = [];\n    Object.entries(knowledgeData).forEach(([knowledge, data]) => {\n      if (data.sub_knowledge) {\n        Object.entries(data.sub_knowledge).forEach(([sub_knowledge, sub_data]) => {\n          tableData.push({\n            key: `${knowledge}-${sub_knowledge}`,\n            knowledge,\n            sub_knowledge,\n            ...sub_data\n          });\n        });\n      }\n    });\n    return tableData;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      level: 2,\n      children: \"\\u77E5\\u8BC6\\u70B9\\u638C\\u63E1\\u5EA6\\u5206\\u6790\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paragraph, {\n      children: \"\\u672C\\u6A21\\u5757\\u5206\\u6790\\u5B66\\u4E60\\u8005\\u7B54\\u9898\\u884C\\u4E3A\\u65E5\\u5FD7\\u8BB0\\u5F55\\uFF0C\\u4ECE\\u7B54\\u9898\\u5206\\u6570\\u3001\\u7B54\\u9898\\u72B6\\u6001\\u7B49\\u591A\\u7EF4\\u5EA6\\u5C5E\\u6027\\u91CF\\u5316\\u8BC4\\u4F30\\u77E5\\u8BC6\\u70B9\\u638C\\u63E1\\u7A0B\\u5EA6\\uFF0C\\u5E76\\u8BC6\\u522B\\u5176\\u77E5\\u8BC6\\u4F53\\u7CFB\\u4E2D\\u5B58\\u5728\\u7684\\u8584\\u5F31\\u73AF\\u8282\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"filter-form\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        gutter: 16,\n        align: \"middle\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          sm: 12,\n          md: 8,\n          lg: 6,\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"\\u9009\\u62E9\\u5B66\\u751F\",\n            style: {\n              width: '100%'\n            },\n            allowClear: true,\n            onChange: setSelectedStudent,\n            loading: loading,\n            children: students.map(student => /*#__PURE__*/_jsxDEV(Option, {\n              value: student.student_ID,\n              children: [student.student_ID, \" \", student.sex ? `(${student.sex})` : '']\n            }, student.student_ID, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          sm: 12,\n          md: 8,\n          lg: 6,\n          style: {\n            marginTop: {\n              xs: '10px',\n              sm: '0'\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            onClick: analyzeKnowledge,\n            loading: loading,\n            children: \"\\u5206\\u6790\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      message: \"\\u9519\\u8BEF\",\n      description: error,\n      type: \"error\",\n      showIcon: true,\n      style: {\n        marginBottom: 16\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 17\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Spin, {\n      tip: \"\\u5206\\u6790\\u4E2D...\",\n      size: \"large\",\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: '100px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 9\n    }, this) : knowledgeData ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        gutter: 16,\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          md: 12,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"chart-card\",\n            title: \"\\u77E5\\u8BC6\\u70B9\\u638C\\u63E1\\u5EA6\\u96F7\\u8FBE\\u56FE\",\n            children: /*#__PURE__*/_jsxDEV(ReactECharts, {\n              option: getKnowledgeRadarOption(),\n              style: {\n                height: '300px',\n                width: '100%'\n              },\n              className: \"chart-container\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          md: 12,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"chart-card\",\n            title: \"\\u77E5\\u8BC6\\u70B9\\u638C\\u63E1\\u5EA6\\u5BF9\\u6BD4\",\n            children: /*#__PURE__*/_jsxDEV(ReactECharts, {\n              option: getKnowledgeBarOption(),\n              style: {\n                height: '300px',\n                width: '100%'\n              },\n              className: \"chart-container\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }, this), forceGraphData && forceGraphData.nodes && forceGraphData.nodes.length > 0 && /*#__PURE__*/_jsxDEV(Row, {\n        gutter: 16,\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"chart-card\",\n            title: \"\\u77E5\\u8BC6\\u70B9\\u5173\\u8054\\u529B\\u5BFC\\u5411\\u56FE (D3\\u53EF\\u89C6\\u5316)\",\n            children: /*#__PURE__*/_jsxDEV(KnowledgeForceGraph, {\n              data: forceGraphData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 13\n      }, this), forceGraphData && console.log('力导向图数据:', forceGraphData), /*#__PURE__*/_jsxDEV(Divider, {\n        orientation: \"left\",\n        children: \"\\u4ECE\\u5C5E\\u77E5\\u8BC6\\u70B9\\u638C\\u63E1\\u60C5\\u51B5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        columns: subKnowledgeColumns,\n        dataSource: getSubKnowledgeData(),\n        scroll: {\n          x: 'max-content'\n        },\n        pagination: {\n          pageSize: 5\n        },\n        className: \"data-table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 11\n      }, this), weakPoints.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Divider, {\n          orientation: \"left\",\n          children: \"\\u8584\\u5F31\\u73AF\\u8282\\u5206\\u6790\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Alert, {\n          message: \"\\u53D1\\u73B0\\u77E5\\u8BC6\\u8584\\u5F31\\u73AF\\u8282\",\n          description: \"\\u4EE5\\u4E0B\\u77E5\\u8BC6\\u70B9\\u6216\\u4ECE\\u5C5E\\u77E5\\u8BC6\\u70B9\\u7684\\u638C\\u63E1\\u7A0B\\u5EA6\\u8F83\\u4F4E\\uFF0C\\u5EFA\\u8BAE\\u52A0\\u5F3A\\u5B66\\u4E60\\u3002\",\n          type: \"warning\",\n          showIcon: true,\n          style: {\n            marginBottom: 16\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          columns: weakPointsColumns,\n          dataSource: weakPoints.map((item, index) => ({\n            ...item,\n            key: index\n          })),\n          pagination: {\n            pageSize: 5\n          },\n          className: \"data-table\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 348,\n    columnNumber: 5\n  }, this);\n};\n_s(KnowledgeAnalysis, \"YiC0f94Ypj+dXOZWZ5TN8+rAkic=\");\n_c = KnowledgeAnalysis;\nexport default KnowledgeAnalysis;\nvar _c;\n$RefreshReg$(_c, \"KnowledgeAnalysis\");","map":{"version":3,"names":["React","useState","useEffect","Row","Col","Card","Select","Button","Table","Spin","Alert","Typography","Divider","ReactECharts","axios","KnowledgeForceGraph","jsxDEV","_jsxDEV","Fragment","_Fragment","Option","Title","Paragraph","KnowledgeAnalysis","_s","loading","setLoading","error","setError","students","setStudents","selectedStudent","setSelectedStudent","knowledgeData","setKnowledgeData","weakPoints","setWeakPoints","forceGraphData","setForceGraphData","fetchStudents","response","get","data","err","console","analyzeKnowledge","url","status","knowledge_mastery","weak_points","knowledge_relations","relationsUrl","relationsResponse","relations","generateMockForceGraphData","relationsErr","message","log","knowledgeNames","Object","keys","length","nodes","map","name","id","mastery","correct_rate","value","total_submissions","links","forEach","source","i","numLinks","Math","floor","random","j","targetIndex","target","some","link","push","graphData","getKnowledgeRadarOption","correctRates","toFixed","title","text","left","tooltip","trigger","radar","indicator","max","series","type","areaStyle","color","lineStyle","itemStyle","getKnowledgeBarOption","submissionRates","correct_submission_rate","axisPointer","legend","top","xAxis","axisLabel","rotate","interval","yAxis","subKnowledgeColumns","dataIndex","key","render","sorter","a","b","avg_time_consume","correct_submissions","weakPointsColumns","getSubKnowledgeData","tableData","entries","knowledge","sub_knowledge","sub_data","children","level","fileName","_jsxFileName","lineNumber","columnNumber","className","gutter","align","xs","sm","md","lg","placeholder","style","width","allowClear","onChange","student","student_ID","sex","marginTop","onClick","description","showIcon","marginBottom","tip","size","display","justifyContent","option","height","orientation","columns","dataSource","scroll","x","pagination","pageSize","item","index","_c","$RefreshReg$"],"sources":["D:/Vscode/Project/VisualAnalytics/EduAssistSys/frontend/src/pages/KnowledgeAnalysis.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Row, Col, Card, Select, Button, Table, Spin, Alert, Typography, Divider } from 'antd';\r\nimport ReactECharts from 'echarts-for-react';\r\nimport axios from 'axios';\r\nimport { KnowledgeForceGraph } from '../components/D3Visualizations';\r\n\r\nconst { Option } = Select;\r\nconst { Title, Paragraph } = Typography;\r\n\r\nconst KnowledgeAnalysis = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [students, setStudents] = useState([]);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [knowledgeData, setKnowledgeData] = useState(null);\r\n  const [weakPoints, setWeakPoints] = useState([]);\r\n  const [forceGraphData, setForceGraphData] = useState(null);\r\n  \r\n  // 加载学生数据\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await axios.get('/api/students');\r\n        setStudents(response.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('加载学生数据失败:', err);\r\n        setError('加载学生数据失败，请稍后重试');\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchStudents();\r\n  }, []);\r\n  \r\n  // 分析知识点掌握度\r\n  const analyzeKnowledge = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const url = selectedStudent \r\n        ? `/api/analysis/knowledge?student_id=${selectedStudent}` \r\n        : '/api/analysis/knowledge';\r\n      \r\n      const response = await axios.get(url);\r\n      \r\n      if (response.data.status === 'success') {\r\n        setKnowledgeData(response.data.knowledge_mastery);\r\n        setWeakPoints(response.data.weak_points || []);\r\n        \r\n        // 获取知识点关联数据用于力导向图可视化\r\n        if (response.data.knowledge_relations) {\r\n          setForceGraphData(response.data.knowledge_relations);\r\n        } else {\r\n          // 如果API没有返回关联数据，尝试单独获取\r\n          try {\r\n            const relationsUrl = selectedStudent \r\n              ? `/api/analysis/knowledge_relations?student_id=${selectedStudent}` \r\n              : '/api/analysis/knowledge_relations';\r\n            \r\n            const relationsResponse = await axios.get(relationsUrl);\r\n            \r\n            if (relationsResponse.data.status === 'success' && relationsResponse.data.relations) {\r\n              setForceGraphData(relationsResponse.data.relations);\r\n            } else {\r\n              // 如果API不存在，生成模拟数据用于展示\r\n              generateMockForceGraphData();\r\n            }\r\n          } catch (relationsErr) {\r\n            console.error('获取知识点关联数据失败:', relationsErr);\r\n            // 生成模拟数据用于展示\r\n            generateMockForceGraphData();\r\n          }\r\n        }\r\n      } else {\r\n        setError(response.data.message || '分析失败');\r\n      }\r\n      \r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('知识点分析失败:', err);\r\n      setError('知识点分析失败，请稍后重试');\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // 生成模拟力导向图数据\r\n  const generateMockForceGraphData = () => {\r\n    if (!knowledgeData) {\r\n      console.log('无法生成力导向图：知识点数据为空');\r\n      return;\r\n    }\r\n    \r\n    const knowledgeNames = Object.keys(knowledgeData);\r\n    console.log('知识点列表:', knowledgeNames);\r\n    \r\n    if (knowledgeNames.length === 0) {\r\n      console.log('无法生成力导向图：知识点列表为空');\r\n      return;\r\n    }\r\n    \r\n    // 创建节点\r\n    const nodes = knowledgeNames.map(name => ({\r\n      id: name,\r\n      name: name,\r\n      mastery: knowledgeData[name].correct_rate || 0,\r\n      value: (knowledgeData[name].total_submissions || 1) / 10 // 节点大小基于提交次数\r\n    }));\r\n    \r\n    // 创建连接\r\n    const links = [];\r\n    \r\n    // 确保至少有两个知识点才能创建连接\r\n    if (knowledgeNames.length > 1) {\r\n      // 为每个知识点创建1-2个随机连接\r\n      knowledgeNames.forEach((source, i) => {\r\n        const numLinks = Math.floor(Math.random() * 2) + 1; // 1-2个连接\r\n        \r\n        for (let j = 0; j < numLinks; j++) {\r\n          // 随机选择目标知识点（不包括自己）\r\n          let targetIndex;\r\n          do {\r\n            targetIndex = Math.floor(Math.random() * knowledgeNames.length);\r\n          } while (targetIndex === i);\r\n          \r\n          const target = knowledgeNames[targetIndex];\r\n          \r\n          // 添加连接（避免重复）\r\n          if (!links.some(link => \r\n            (link.source === source && link.target === target) || \r\n            (link.source === target && link.target === source)\r\n          )) {\r\n            links.push({\r\n              source: source,\r\n              target: target,\r\n              value: Math.random() * 2 + 1 // 随机连接强度\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      console.log('无法创建连接：知识点数量不足');\r\n    }\r\n    \r\n    const graphData = { nodes, links };\r\n    console.log('生成的力导向图数据:', graphData);\r\n    setForceGraphData(graphData);\r\n  };\r\n  \r\n  // 生成知识点掌握度雷达图配置\r\n  const getKnowledgeRadarOption = () => {\r\n    if (!knowledgeData) return {};\r\n    \r\n    const knowledgeNames = Object.keys(knowledgeData);\r\n    const correctRates = knowledgeNames.map(name => (knowledgeData[name].correct_rate * 100).toFixed(2));\r\n    \r\n    return {\r\n      title: {\r\n        text: '知识点掌握度雷达图',\r\n        left: 'center'\r\n      },\r\n      tooltip: {\r\n        trigger: 'item'\r\n      },\r\n      radar: {\r\n        indicator: knowledgeNames.map(name => ({ name, max: 100 }))\r\n      },\r\n      series: [\r\n        {\r\n          name: '知识点掌握度',\r\n          type: 'radar',\r\n          data: [\r\n            {\r\n              value: correctRates,\r\n              name: '正确率(%)',\r\n              areaStyle: {\r\n                color: 'rgba(24, 144, 255, 0.3)'\r\n              },\r\n              lineStyle: {\r\n                color: '#1890ff'\r\n              },\r\n              itemStyle: {\r\n                color: '#1890ff'\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    };\r\n  };\r\n  \r\n  // 生成知识点掌握度柱状图配置\r\n  const getKnowledgeBarOption = () => {\r\n    if (!knowledgeData) return {};\r\n    \r\n    const knowledgeNames = Object.keys(knowledgeData);\r\n    const correctRates = knowledgeNames.map(name => (knowledgeData[name].correct_rate * 100).toFixed(2));\r\n    const submissionRates = knowledgeNames.map(name => (knowledgeData[name].correct_submission_rate * 100).toFixed(2));\r\n    \r\n    return {\r\n      title: {\r\n        text: '知识点掌握度对比',\r\n        left: 'center'\r\n      },\r\n      tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n          type: 'shadow'\r\n        }\r\n      },\r\n      legend: {\r\n        data: ['正确率(%)', '正确提交率(%)'],\r\n        top: 'bottom'\r\n      },\r\n      xAxis: {\r\n        type: 'category',\r\n        data: knowledgeNames,\r\n        axisLabel: {\r\n          rotate: 45,\r\n          interval: 0\r\n        }\r\n      },\r\n      yAxis: {\r\n        type: 'value',\r\n        name: '百分比(%)',\r\n        max: 100\r\n      },\r\n      series: [\r\n        {\r\n          name: '正确率(%)',\r\n          type: 'bar',\r\n          data: correctRates,\r\n          itemStyle: {\r\n            color: '#1890ff'\r\n          }\r\n        },\r\n        {\r\n          name: '正确提交率(%)',\r\n          type: 'bar',\r\n          data: submissionRates,\r\n          itemStyle: {\r\n            color: '#52c41a'\r\n          }\r\n        }\r\n      ]\r\n    };\r\n  };\r\n  \r\n  // 从属知识点表格列定义\r\n  const subKnowledgeColumns = [\r\n    {\r\n      title: '知识点',\r\n      dataIndex: 'knowledge',\r\n      key: 'knowledge',\r\n    },\r\n    {\r\n      title: '从属知识点',\r\n      dataIndex: 'sub_knowledge',\r\n      key: 'sub_knowledge',\r\n    },\r\n    {\r\n      title: '正确率',\r\n      dataIndex: 'correct_rate',\r\n      key: 'correct_rate',\r\n      render: (text) => `${(text * 100).toFixed(2)}%`,\r\n      sorter: (a, b) => a.correct_rate - b.correct_rate,\r\n    },\r\n    {\r\n      title: '正确提交率',\r\n      dataIndex: 'correct_submission_rate',\r\n      key: 'correct_submission_rate',\r\n      render: (text) => `${(text * 100).toFixed(2)}%`,\r\n      sorter: (a, b) => a.correct_submission_rate - b.correct_submission_rate,\r\n    },\r\n    {\r\n      title: '平均用时(秒)',\r\n      dataIndex: 'avg_time_consume',\r\n      key: 'avg_time_consume',\r\n      render: (text) => text.toFixed(2),\r\n      sorter: (a, b) => a.avg_time_consume - b.avg_time_consume,\r\n    },\r\n    {\r\n      title: '总提交次数',\r\n      dataIndex: 'total_submissions',\r\n      key: 'total_submissions',\r\n      sorter: (a, b) => a.total_submissions - b.total_submissions,\r\n    },\r\n    {\r\n      title: '正确提交次数',\r\n      dataIndex: 'correct_submissions',\r\n      key: 'correct_submissions',\r\n      sorter: (a, b) => a.correct_submissions - b.correct_submissions,\r\n    },\r\n  ];\r\n  \r\n  // 薄弱环节表格列定义\r\n  const weakPointsColumns = [\r\n    {\r\n      title: '知识点',\r\n      dataIndex: 'knowledge',\r\n      key: 'knowledge',\r\n    },\r\n    {\r\n      title: '从属知识点',\r\n      dataIndex: 'sub_knowledge',\r\n      key: 'sub_knowledge',\r\n      render: (text) => text || '-',\r\n    },\r\n    {\r\n      title: '正确率',\r\n      dataIndex: 'correct_rate',\r\n      key: 'correct_rate',\r\n      render: (text) => `${(text * 100).toFixed(2)}%`,\r\n      sorter: (a, b) => a.correct_rate - b.correct_rate,\r\n    },\r\n    {\r\n      title: '原因',\r\n      dataIndex: 'reason',\r\n      key: 'reason',\r\n    },\r\n  ];\r\n  \r\n  // 准备从属知识点表格数据\r\n  const getSubKnowledgeData = () => {\r\n    if (!knowledgeData) return [];\r\n    \r\n    const tableData = [];\r\n    \r\n    Object.entries(knowledgeData).forEach(([knowledge, data]) => {\r\n      if (data.sub_knowledge) {\r\n        Object.entries(data.sub_knowledge).forEach(([sub_knowledge, sub_data]) => {\r\n          tableData.push({\r\n            key: `${knowledge}-${sub_knowledge}`,\r\n            knowledge,\r\n            sub_knowledge,\r\n            ...sub_data\r\n          });\r\n        });\r\n      }\r\n    });\r\n    \r\n    return tableData;\r\n  };\r\n  \r\n  return (\r\n    <div>\r\n      <Title level={2}>知识点掌握度分析</Title>\r\n      <Paragraph>\r\n        本模块分析学习者答题行为日志记录，从答题分数、答题状态等多维度属性量化评估知识点掌握程度，并识别其知识体系中存在的薄弱环节。\r\n      </Paragraph>\r\n      \r\n      <Card className=\"filter-form\">\r\n        <Row gutter={16} align=\"middle\">\r\n          <Col xs={24} sm={12} md={8} lg={6}>\r\n            <Select\r\n              placeholder=\"选择学生\"\r\n              style={{ width: '100%' }}\r\n              allowClear\r\n              onChange={setSelectedStudent}\r\n              loading={loading}\r\n            >\r\n              {students.map(student => (\r\n                <Option key={student.student_ID} value={student.student_ID}>\r\n                  {student.student_ID} {student.sex ? `(${student.sex})` : ''}\r\n                </Option>\r\n              ))}\r\n            </Select>\r\n          </Col>\r\n          <Col xs={24} sm={12} md={8} lg={6} style={{ marginTop: { xs: '10px', sm: '0' } }}>\r\n            <Button type=\"primary\" onClick={analyzeKnowledge} loading={loading}>\r\n              分析\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </Card>\r\n      \r\n      {error && <Alert message=\"错误\" description={error} type=\"error\" showIcon style={{ marginBottom: 16 }} />}\r\n      \r\n      {loading ? (\r\n        <Spin tip=\"分析中...\" size=\"large\" style={{ display: 'flex', justifyContent: 'center', marginTop: '100px' }} />\r\n      ) : knowledgeData ? (\r\n        <>\r\n          <Row gutter={16}>\r\n            <Col xs={24} md={12}>\r\n              <Card className=\"chart-card\" title=\"知识点掌握度雷达图\">\r\n                <ReactECharts\r\n                  option={getKnowledgeRadarOption()}\r\n                  style={{ height: '300px', width: '100%' }}\r\n                  className=\"chart-container\"\r\n                />\r\n              </Card>\r\n            </Col>\r\n            <Col xs={24} md={12}>\r\n              <Card className=\"chart-card\" title=\"知识点掌握度对比\">\r\n                <ReactECharts\r\n                  option={getKnowledgeBarOption()}\r\n                  style={{ height: '300px', width: '100%' }}\r\n                  className=\"chart-container\"\r\n                />\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          \r\n          {/* D3.js知识点关联力导向图 */}\r\n          {forceGraphData && forceGraphData.nodes && forceGraphData.nodes.length > 0 && (\r\n            <Row gutter={16}>\r\n              <Col xs={24}>\r\n                <Card className=\"chart-card\" title=\"知识点关联力导向图 (D3可视化)\">\r\n                  <KnowledgeForceGraph data={forceGraphData} />\r\n                </Card>\r\n              </Col>\r\n            </Row>\r\n          )}\r\n          \r\n          {/* 调试信息 */}\r\n          {forceGraphData && console.log('力导向图数据:', forceGraphData)}\r\n          \r\n          <Divider orientation=\"left\">从属知识点掌握情况</Divider>\r\n          <Table \r\n            columns={subKnowledgeColumns} \r\n            dataSource={getSubKnowledgeData()} \r\n            scroll={{ x: 'max-content' }}\r\n            pagination={{ pageSize: 5 }}\r\n            className=\"data-table\"\r\n          />\r\n          \r\n          {weakPoints.length > 0 && (\r\n            <>\r\n              <Divider orientation=\"left\">薄弱环节分析</Divider>\r\n              <Alert\r\n                message=\"发现知识薄弱环节\"\r\n                description=\"以下知识点或从属知识点的掌握程度较低，建议加强学习。\"\r\n                type=\"warning\"\r\n                showIcon\r\n                style={{ marginBottom: 16 }}\r\n              />\r\n              <Table \r\n                columns={weakPointsColumns} \r\n                dataSource={weakPoints.map((item, index) => ({ ...item, key: index }))} \r\n                pagination={{ pageSize: 5 }}\r\n                className=\"data-table\"\r\n              />\r\n            </>\r\n          )}\r\n        </>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default KnowledgeAnalysis;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}