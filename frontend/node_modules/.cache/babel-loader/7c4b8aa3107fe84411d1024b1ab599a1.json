{"ast":null,"code":"var _jsxFileName = \"D:\\\\Vscode\\\\Project\\\\VisualAnalytics\\\\EduAssistSys\\\\frontend\\\\src\\\\pages\\\\NLPInteraction.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Input, Button, Card, List, Typography, Spin, message, Divider, Select } from 'antd';\nimport { SendOutlined, RobotOutlined, UserOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  TextArea\n} = Input;\nconst {\n  Title,\n  Paragraph,\n  Text\n} = Typography;\nconst {\n  Option\n} = Select;\nexport default function NLPInteraction() {\n  _s();\n  const [query, setQuery] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [modelType, setModelType] = useState('backend'); // 'backend' 或 'deepseek'\n  const messagesEndRef = useRef(null);\n\n  // 自动滚动到最新消息\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // 添加欢迎消息\n  useEffect(() => {\n    setMessages([{\n      type: 'system',\n      content: '欢迎使用教育辅助可视分析系统的自然语言交互功能。您可以询问关于知识点掌握情况、学习行为模式和题目难度的问题，也可以请求生成分析报告。'\n    }]);\n  }, []);\n\n  // 处理查询提交\n  const handleSubmit = async () => {\n    if (!query.trim()) return;\n\n    // 添加用户消息\n    const userMessage = {\n      type: 'user',\n      content: query\n    };\n    setMessages(prev => [...prev, userMessage]);\n\n    // 清空输入框\n    setQuery('');\n\n    // 设置加载状态\n    setLoading(true);\n    try {\n      let response;\n      if (modelType === 'backend') {\n        // 使用后端NLP服务\n        response = await axios.post('/api/nlp/query', {\n          query\n        });\n\n        // 添加系统回复\n        const systemMessage = {\n          type: 'system',\n          content: response.data.content || '抱歉，我无法理解您的问题。',\n          data: response.data\n        };\n        setMessages(prev => [...prev, systemMessage]);\n      } else {\n        // 使用本地Deepseek模型\n        const deepseekResponse = await callDeepseekModel(query);\n\n        // 添加系统回复\n        const systemMessage = {\n          type: 'system',\n          content: deepseekResponse,\n          model: 'deepseek'\n        };\n        setMessages(prev => [...prev, systemMessage]);\n      }\n    } catch (error) {\n      console.error('查询处理失败:', error);\n      message.error('查询处理失败，请稍后重试');\n\n      // 添加错误消息\n      const errorMessage = {\n        type: 'system',\n        content: '抱歉，处理您的请求时出现了错误。请稍后重试。',\n        error: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 调用本地Deepseek模型\n  const callDeepseekModel = async prompt => {\n    try {\n      const url = \"http://localhost:11434/api/generate\";\n      const data = {\n        model: \"deepseek-r1:8b\",\n        prompt: prompt,\n        stream: false\n      };\n      const response = await axios.post(url, data);\n      if (response.status === 200) {\n        return response.data.response;\n      } else {\n        throw new Error(`请求失败，状态码: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('Deepseek模型调用失败:', error);\n      throw error;\n    }\n  };\n\n  // 渲染消息内容\n  const renderMessageContent = message => {\n    if (message.type === 'system' && message.data && message.data.type === 'report') {\n      // 渲染报告链接\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Paragraph, {\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          href: `/api/report/download/${message.data.report_path.split('/').pop()}`,\n          target: \"_blank\",\n          children: \"\\u4E0B\\u8F7D\\u62A5\\u544A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this);\n    }\n\n    // 普通文本消息\n    return /*#__PURE__*/_jsxDEV(Paragraph, {\n      children: message.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 12\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: '1000px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          level: 4,\n          children: \"\\u81EA\\u7136\\u8BED\\u8A00\\u4EA4\\u4E92\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: modelType,\n          onChange: setModelType,\n          style: {\n            width: 200\n          },\n          children: [/*#__PURE__*/_jsxDEV(Option, {\n            value: \"backend\",\n            children: \"\\u540E\\u7AEFNLP\\u670D\\u52A1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Option, {\n            value: \"deepseek\",\n            children: \"\\u672C\\u5730Deepseek\\u6A21\\u578B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this),\n      style: {\n        marginBottom: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(Paragraph, {\n        children: \"\\u60A8\\u53EF\\u4EE5\\u4F7F\\u7528\\u81EA\\u7136\\u8BED\\u8A00\\u5411\\u7CFB\\u7EDF\\u63D0\\u95EE\\uFF0C\\u83B7\\u53D6\\u5173\\u4E8E\\u5B66\\u751F\\u5B66\\u4E60\\u60C5\\u51B5\\u7684\\u5206\\u6790\\u7ED3\\u679C\\u3002 \\u4F8B\\u5982\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\\"\\u5206\\u6790\\u5B66\\u751FID:12345\\u7684\\u77E5\\u8BC6\\u70B9\\u638C\\u63E1\\u60C5\\u51B5\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\\"\\u67E5\\u770B\\u5B66\\u751F\\u7684\\u5B66\\u4E60\\u884C\\u4E3A\\u6A21\\u5F0F\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\\"\\u751F\\u6210\\u4E00\\u4EFDPDF\\u683C\\u5F0F\\u7684\\u77E5\\u8BC6\\u70B9\\u638C\\u63E1\\u62A5\\u544A\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        height: '500px',\n        marginBottom: 20,\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      bodyStyle: {\n        flex: 1,\n        overflow: 'auto',\n        padding: '12px 24px',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(List, {\n        itemLayout: \"horizontal\",\n        dataSource: messages,\n        style: {\n          flex: 1\n        },\n        renderItem: message => /*#__PURE__*/_jsxDEV(List.Item, {\n          style: {\n            padding: '8px 0'\n          },\n          children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n            avatar: message.type === 'user' ? /*#__PURE__*/_jsxDEV(UserOutlined, {\n              style: {\n                fontSize: '24px',\n                color: '#1890ff'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(RobotOutlined, {\n              style: {\n                fontSize: '24px',\n                color: '#52c41a'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 19\n            }, this),\n            title: message.type === 'user' ? '您' : '系统',\n            description: renderMessageContent(message)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '20px 0'\n        },\n        children: /*#__PURE__*/_jsxDEV(Spin, {\n          tip: \"\\u6B63\\u5728\\u5904\\u7406\\u60A8\\u7684\\u8BF7\\u6C42...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TextArea, {\n        value: query,\n        onChange: e => setQuery(e.target.value),\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u95EE\\u9898...\",\n        autoSize: {\n          minRows: 2,\n          maxRows: 6\n        },\n        onPressEnter: e => {\n          if (!e.shiftKey) {\n            e.preventDefault();\n            handleSubmit();\n          }\n        },\n        style: {\n          flex: 1,\n          marginRight: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        icon: /*#__PURE__*/_jsxDEV(SendOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 17\n        }, this),\n        onClick: handleSubmit,\n        loading: loading,\n        style: {\n          height: 'auto'\n        },\n        children: \"\\u53D1\\u9001\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 5\n  }, this);\n}\n_s(NLPInteraction, \"sShoBDfsLqp6vjJPSfkdP/mfdU8=\");\n_c = NLPInteraction;\nvar _c;\n$RefreshReg$(_c, \"NLPInteraction\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Input","Button","Card","List","Typography","Spin","message","Divider","Select","SendOutlined","RobotOutlined","UserOutlined","axios","jsxDEV","_jsxDEV","TextArea","Title","Paragraph","Text","Option","NLPInteraction","_s","query","setQuery","messages","setMessages","loading","setLoading","modelType","setModelType","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","type","content","handleSubmit","trim","userMessage","prev","response","post","systemMessage","data","deepseekResponse","callDeepseekModel","model","error","console","errorMessage","prompt","url","stream","status","Error","renderMessageContent","children","fileName","_jsxFileName","lineNumber","columnNumber","href","report_path","split","pop","target","style","maxWidth","margin","title","display","justifyContent","alignItems","level","value","onChange","width","marginBottom","height","flexDirection","bodyStyle","flex","overflow","padding","itemLayout","dataSource","renderItem","Item","Meta","avatar","fontSize","color","description","ref","textAlign","tip","e","placeholder","autoSize","minRows","maxRows","onPressEnter","shiftKey","preventDefault","marginRight","icon","onClick","_c","$RefreshReg$"],"sources":["D:/Vscode/Project/VisualAnalytics/EduAssistSys/frontend/src/pages/NLPInteraction.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Input, Button, Card, List, Typography, Spin, message, Divider, Select } from 'antd';\r\nimport { SendOutlined, RobotOutlined, UserOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\n\r\nconst { TextArea } = Input;\r\nconst { Title, Paragraph, Text } = Typography;\r\nconst { Option } = Select;\r\n\r\nexport default function NLPInteraction() {\r\n  const [query, setQuery] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [modelType, setModelType] = useState('backend'); // 'backend' 或 'deepseek'\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // 自动滚动到最新消息\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // 添加欢迎消息\r\n  useEffect(() => {\r\n    setMessages([\r\n      {\r\n        type: 'system',\r\n        content: '欢迎使用教育辅助可视分析系统的自然语言交互功能。您可以询问关于知识点掌握情况、学习行为模式和题目难度的问题，也可以请求生成分析报告。'\r\n      }\r\n    ]);\r\n  }, []);\r\n\r\n  // 处理查询提交\r\n  const handleSubmit = async () => {\r\n    if (!query.trim()) return;\r\n\r\n    // 添加用户消息\r\n    const userMessage = { type: 'user', content: query };\r\n    setMessages(prev => [...prev, userMessage]);\r\n    \r\n    // 清空输入框\r\n    setQuery('');\r\n    \r\n    // 设置加载状态\r\n    setLoading(true);\r\n    \r\n    try {\r\n      let response;\r\n      \r\n      if (modelType === 'backend') {\r\n        // 使用后端NLP服务\r\n        response = await axios.post('/api/nlp/query', { query });\r\n        \r\n        // 添加系统回复\r\n        const systemMessage = { \r\n          type: 'system', \r\n          content: response.data.content || '抱歉，我无法理解您的问题。',\r\n          data: response.data\r\n        };\r\n        \r\n        setMessages(prev => [...prev, systemMessage]);\r\n      } else {\r\n        // 使用本地Deepseek模型\r\n        const deepseekResponse = await callDeepseekModel(query);\r\n        \r\n        // 添加系统回复\r\n        const systemMessage = { \r\n          type: 'system', \r\n          content: deepseekResponse,\r\n          model: 'deepseek'\r\n        };\r\n        \r\n        setMessages(prev => [...prev, systemMessage]);\r\n      }\r\n    } catch (error) {\r\n      console.error('查询处理失败:', error);\r\n      message.error('查询处理失败，请稍后重试');\r\n      \r\n      // 添加错误消息\r\n      const errorMessage = { \r\n        type: 'system', \r\n        content: '抱歉，处理您的请求时出现了错误。请稍后重试。',\r\n        error: true\r\n      };\r\n      \r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // 调用本地Deepseek模型\r\n  const callDeepseekModel = async (prompt) => {\r\n    try {\r\n      const url = \"http://localhost:11434/api/generate\";\r\n      \r\n      const data = {\r\n        model: \"deepseek-r1:8b\",\r\n        prompt: prompt,\r\n        stream: false,\r\n      };\r\n      \r\n      const response = await axios.post(url, data);\r\n      \r\n      if (response.status === 200) {\r\n        return response.data.response;\r\n      } else {\r\n        throw new Error(`请求失败，状态码: ${response.status}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Deepseek模型调用失败:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // 渲染消息内容\r\n  const renderMessageContent = (message) => {\r\n    if (message.type === 'system' && message.data && message.data.type === 'report') {\r\n      // 渲染报告链接\r\n      return (\r\n        <div>\r\n          <Paragraph>{message.content}</Paragraph>\r\n          <Button type=\"primary\" href={`/api/report/download/${message.data.report_path.split('/').pop()}`} target=\"_blank\">\r\n            下载报告\r\n          </Button>\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    // 普通文本消息\r\n    return <Paragraph>{message.content}</Paragraph>;\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: '1000px', margin: '0 auto' }}>\r\n      <Card\r\n        title={\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <Title level={4}>自然语言交互</Title>\r\n            <Select \r\n              value={modelType} \r\n              onChange={setModelType} \r\n              style={{ width: 200 }}\r\n            >\r\n              <Option value=\"backend\">后端NLP服务</Option>\r\n              <Option value=\"deepseek\">本地Deepseek模型</Option>\r\n            </Select>\r\n          </div>\r\n        }\r\n        style={{ marginBottom: 20 }}\r\n      >\r\n        <Paragraph>\r\n          您可以使用自然语言向系统提问，获取关于学生学习情况的分析结果。\r\n          例如：\r\n        </Paragraph>\r\n        <ul>\r\n          <li>\"分析学生ID:12345的知识点掌握情况\"</li>\r\n          <li>\"查看学生的学习行为模式\"</li>\r\n          <li>\"生成一份PDF格式的知识点掌握报告\"</li>\r\n        </ul>\r\n      </Card>\r\n      \r\n      <Card\r\n        style={{ \r\n          height: '500px', \r\n          marginBottom: 20, \r\n          display: 'flex', \r\n          flexDirection: 'column' \r\n        }}\r\n        bodyStyle={{ \r\n          flex: 1, \r\n          overflow: 'auto', \r\n          padding: '12px 24px',\r\n          display: 'flex',\r\n          flexDirection: 'column'\r\n        }}\r\n      >\r\n        <List\r\n          itemLayout=\"horizontal\"\r\n          dataSource={messages}\r\n          style={{ flex: 1 }}\r\n          renderItem={(message) => (\r\n            <List.Item style={{ padding: '8px 0' }}>\r\n              <List.Item.Meta\r\n                avatar={\r\n                  message.type === 'user' ? \r\n                  <UserOutlined style={{ fontSize: '24px', color: '#1890ff' }} /> : \r\n                  <RobotOutlined style={{ fontSize: '24px', color: '#52c41a' }} />\r\n                }\r\n                title={message.type === 'user' ? '您' : '系统'}\r\n                description={renderMessageContent(message)}\r\n              />\r\n            </List.Item>\r\n          )}\r\n        />\r\n        <div ref={messagesEndRef} />\r\n        \r\n        {loading && (\r\n          <div style={{ textAlign: 'center', padding: '20px 0' }}>\r\n            <Spin tip=\"正在处理您的请求...\" />\r\n          </div>\r\n        )}\r\n      </Card>\r\n      \r\n      <div style={{ display: 'flex' }}>\r\n        <TextArea\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          placeholder=\"请输入您的问题...\"\r\n          autoSize={{ minRows: 2, maxRows: 6 }}\r\n          onPressEnter={(e) => {\r\n            if (!e.shiftKey) {\r\n              e.preventDefault();\r\n              handleSubmit();\r\n            }\r\n          }}\r\n          style={{ flex: 1, marginRight: 8 }}\r\n        />\r\n        <Button \r\n          type=\"primary\" \r\n          icon={<SendOutlined />} \r\n          onClick={handleSubmit}\r\n          loading={loading}\r\n          style={{ height: 'auto' }}\r\n        >\r\n          发送\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}